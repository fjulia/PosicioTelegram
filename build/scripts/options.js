function loadOptions(){$("#config_bot_token").val(localStorage.telegram_bot_token),$("#config_bot_group").val(localStorage.telegram_group_name),$("#config_origin").val(localStorage.telegram_origin),$("#sendRuta").prop("checked","true"==localStorage.telegram_send_ruta),$("#sendRuta").change(setSendRuta),$("#config_save").click(saveOptions),$("#config_reset").click(eraseOptions)}function setSendRuta(){var e=$("#config_origin").val().trim();$("#sendRuta").is(":checked")?e&&""!==e?localStorage.telegram_send_ruta=!0:$("#sendRuta").prop("checked",!1):localStorage.telegram_send_ruta=!1,$("#sendRuta").prop("checked","true"==localStorage.telegram_send_ruta)}function saveOptions(){var e=$("#config_bot_token").val().trim(),o=$("#config_bot_group").val().trim(),a=$("#config_origin").val().trim();""!==e&&e!=localStorage.telegram_bot_token||""!==o&&o!=localStorage.telegram_group_name?($(this).find("span").addClass("fa-spin"),$(this).html('<span class="fa fa-refresh fa-spin"></span>  comprovant'),chrome.extension.sendMessage({msg:"createGroup",bot_id:e,groupName:o,request:a})):(a&&""!==a&&(localStorage.telegram_origin=a),window.close())}function eraseOptions(){localStorage.clear(),chrome.extension.sendMessage({msg:"reset"}),$("#config_bot_token").val(""),$("#config_bot_group").val(""),$("#config_origin").val("")}chrome.runtime.onMessage.addListener(function(e,o,a){"configured_ok"==e.status?window.close():"configured_failed"==e.status&&window.close()}),$(document).ready(function(){loadOptions()});